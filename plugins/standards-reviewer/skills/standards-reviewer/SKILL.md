---
name: standards-reviewer
description: >
  專案規範審查員：根據專案載入對應的開發規範，執行程式碼合規審查。
  支援多公司多專案規範的延遲載入。在實作完成後或 CI 前觸發，逐項核對程式碼是否符合規範。
  使用時機：實作完成後要求審查、CI 前檢查、程式碼合規確認、規範檢查。
  關鍵字：review, 審查, 規範, standards, compliance, 合規, 檢查, CI, pre-commit,
  code review, 程式碼審查, 規格檢查。
---

# 專案規範審查員 (Standards Reviewer)

## 流程

### 1. 偵測專案並載入規範

觸發後，根據以下方式確定當前專案：

1. **自動偵測**：檢查當前工作目錄的專案標識（pom.xml、package.json、專案名稱等）
2. **無法判斷時**：使用 AskUserQuestion 詢問使用者

根據專案選擇對應規範（Progressive Disclosure — 只載入需要的）：

| 條件 | 載入的規範 |
|------|-----------|
| 所有 SOETEK 專案 | `references/soetek-common.md`（公司共通規範） |
| EPA 專案 | + `references/epa-standards.md`（EPA 專案規範） |
| SERP 專案 | + `references/serp-standards.md`（SERP 專案規範） |

### 2. 確認審查範圍

向使用者確認：
- 要審查哪些檔案？（指定檔案 / 最近修改的檔案 / 整個功能模組）
- 審查深度？（快速掃描 / 完整審查）

### 3. 執行審查 Checklist

逐項核對程式碼：

#### 3.1 命名規範
- [ ] 類別、方法、變數命名是否符合規範
- [ ] 檔案路徑和目錄結構是否正確
- [ ] 常數和列舉命名

#### 3.2 架構規範
- [ ] 是否遵循指定的架構模式
- [ ] 層級職責是否正確（Controller/Service/Repository）
- [ ] 相依方向是否合規

#### 3.3 程式碼風格
- [ ] 是否使用指定的工具類別和共用元件
- [ ] 錯誤處理方式是否符合規範
- [ ] API 格式（請求/回應）是否符合標準

#### 3.4 資料庫規範
- [ ] Entity 對應是否正確
- [ ] SQL / Migration 命名和格式
- [ ] 索引和約束

#### 3.5 前端規範（如適用）
- [ ] 元件結構和命名
- [ ] 狀態管理模式
- [ ] 型別定義完整性

> **注意**：以上為通用 checklist，具體審查項目以載入的規範文件為準。

### 4. 產出審查報告

格式：

```
## 審查報告

**專案**: <專案名稱>
**載入規範**: <規範清單>
**審查範圍**: <檔案清單>
**審查時間**: <日期>

### 不合規項目

| # | 檔案 | 行號 | 規範項目 | 問題描述 | 建議修正 |
|---|------|------|----------|----------|----------|
| 1 | ... | ... | ... | ... | ... |

### 合規項目摘要

- [x] <通過的項目>

### 總結

- 審查項目數: N
- 合規: N
- 不合規: N
- 合規率: N%
```

## 新增專案規範

要支援新專案，在 `references/` 下新增對應的規範檔案，並在步驟 1 的條件表中加入判斷邏輯。

規範檔案建議結構：

```markdown
# <專案名稱> 開發規範

## 命名規範
...

## 架構規範
...

## 程式碼風格
...

## 資料庫規範
...

## 前端規範
...
```
